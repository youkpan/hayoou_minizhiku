function BxDolSubscription(a){this._sActionsUrl=a.sActionUrl;this._sObjName=a.sObjName==undefined?"BxDolSubscription":a.sObjName;this._sVisitorPopup=a.sVisitorPopup==undefined?"sbs_visitor_popup":a.sVisitorPopup;this._sAnimationEffect=a.sAnimationEffect==undefined?"slide":a.sAnimationEffect;this._iAnimationSpeed=a.iAnimationSpeed==undefined?"slow":a.iAnimationSpeed}BxDolSubscription.prototype.send=function(b){var a=this;$(b).ajaxSubmit({dataType:"json",success:function(c){alert(c.message);if(parseInt(c.code)==0){$("#"+a._sVisitorPopup).dolPopupHide()}}});return false};BxDolSubscription.prototype.subscribe=function(d,b,a,f,e){var c={direction:"subscribe",unit:b,action:a,object_id:f};d=parseInt(d);if(d!=0){c.user_id=d;this._sbs_action(c,e)}else{$("#"+this._sVisitorPopup+" [name='direction']").val("subscribe");$("#"+this._sVisitorPopup+" [name='unit']").val(b);$("#"+this._sVisitorPopup+" [name='action']").val(a);$("#"+this._sVisitorPopup+" [name='object_id']").val(f);$("#"+this._sVisitorPopup).dolPopup()}};BxDolSubscription.prototype.unsubscribe=function(d,b,a,f,e){var c={direction:"unsubscribe",unit:b,action:a,object_id:f};d=parseInt(d);if(d!=0){c.user_id=d;this._sbs_action(c,e)}};BxDolSubscription.prototype.unsubscribeConfirm=function(a){$(document).dolPopupConfirm({message:_t("_sbs_wrn_unsubscribe"),onClickYes:function(){$.get(a+"&js=1",{},function(b){alert(b.message);if(b.code==0){window.location.href=window.location.href}},"json")}})};BxDolSubscription.prototype._sbs_action=function(a,b){if(b==undefined){b=function(c){alert(c.message)}}$.post(this._sActionsUrl,a,b,"json")};
