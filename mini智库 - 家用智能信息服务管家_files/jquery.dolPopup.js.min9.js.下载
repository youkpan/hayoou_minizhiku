(function(c){c.fn.dolPopupDefaultOptions={closeOnOuterClick:true,closeElement:".bx-popup-element-close",position:"centered",fog:{color:"#000",opacity:0.7},pointer:false,left:0,top:0,moveToDocRoot:true,onBeforeShow:function(){},onShow:function(){},onBeforeHide:function(){},onHide:function(){},speed:200};c.fn.dolPopupDefaultPointerOptions={align:"right",offset:"0 0",offset_pointer:"0 0"};c.fn.dolPopup=function(d){var d=d||{};var e=c.extend({},c.fn.dolPopupDefaultOptions,d);if(false!=e.pointer){e.fog=false;e.pointer=c.extend({},c.fn.dolPopupDefaultPointerOptions,c(document).data("bx-popup-options")?c(document).data("bx-popup-options"):{},e.pointer)}if(e.fog&&!c("#bx-popup-fog").length){c('<div id="bx-popup-fog" class="bx-def-z-index-overlay" style="display: none;">&nbsp;</div>').prependTo("body")}c("#bx-popup-fog").css({position:"fixed",top:0,left:0,width:"100%",height:"100%",opacity:e.fog.opacity,backgroundColor:e.fog.color,"-webkit-backface-visibility":"hidden"});c(window).on("resize.popupFog",function(){c("#bx-popup-fog").css({width:c(window).width(),height:c(window).height()})});return this.each(function(){var f=c(this);f.addClass("bx-def-z-index-modal");if(!f.attr("id")){return false}if(f.is(":visible")){f.dolPopupHide();return true}if(false!=e.pointer){f.addClass("bx-popup-with-pointer")}f.css({display:"block",visibility:"hidden",position:"absolute",top:0,left:0});if(e.moveToDocRoot){f.detach().appendTo("body")}setTimeout(function(){if(e.fog){b(true)}f.removeClass("bx-popup-transitions bx-popup-inactive");f._dolPopupSetPosition(e);if(!f.hasClass("bx-popup-applied")){f.addClass("bx-popup-applied");f.data("bx-popup-options",e);if(e.closeElement){c(e.closeElement,f).css("cursor","hand").click(function(){f.dolPopupHide()})}if(e.closeOnOuterClick){var g=function(h){if(f.hasClass("bx-popup-applied")&&f.is(":visible")){if(c(h.target).parents("#"+f.attr("id")).length==0){f.dolPopupHide()}}return true};c(document).on({click:g,touchend:g})}}e.onBeforeShow(f);if(e.moveToDocRoot){f.addClass("bx-popup-inactive");setTimeout(function(){f.addClass("bx-popup-transitions bx-popup-active")},10)}f.css({display:"block",visibility:"visible"});if(e.fog){if(e.speed>0){c("#bx-popup-fog").fadeIn(e.speed)}else{c("#bx-popup-fog").show()}}setTimeout(function(){e.onShow(f);f.find("input[type=text]:first").focus()},e.speed)},100)})};c.fn.dolPopupInline=function(e){if(typeof(e)=="undefined"||typeof(e)!="object"){e={}}var d=c.extend({},e,{position:"fixed",top:"0px",fog:false,closeElement:".bx-popup-close",onBeforeShow:function(f){if(typeof(e.onBeforeShow)=="function"){e.onBeforeShow(f)}c("body").addClass("bx-popup-inline-holder")},onBeforeHide:function(f){if(typeof(e.onBeforeHide)=="function"){e.onBeforeHide(f)}c("body").removeClass("bx-popup-inline-holder")},onHide:function(f){if(typeof(e.onHide)=="function"){e.onHide(f)}if(e.removeOnClose==true){c(f).remove()}}});return this.each(function(){c(this).addClass("bx-popup-inline").dolPopup(d)})};c.fn.dolPopupHide=function(d){if("undefined"==typeof(d)||"object"!=typeof(d)){d={}}return this.each(function(){var e=c(this);if(!e.hasClass("bx-popup-applied")){return false}if(!e.is(":visible")||"hidden"==e.css("visibility")||"none"==e.css("display")){return false}var f=c.extend({},e.data("bx-popup-options"),d);if(!f){return false}c(window).off("resize.popupWindow");c(window).off("resize.popupPointer");c(window).off("resize.popupFog");f.onBeforeHide(e);e.removeClass("bx-popup-active").addClass("bx-popup-inactive");if(f.speed>0){if(f.fog){c("#bx-popup-fog").fadeOut(f.speed)}setTimeout(function(){e.hide().removeClass("bx-popup-applied bx-popup-inactive bx-popup-transitions");f.onHide(e)},f.speed)}else{if(f.fog){c("#bx-popup-fog").hide()}e.hide(function(){f.onHide(e)})}b(false)})};c.fn.dolPopupImage=function(e,d){return this.each(function(){var l=c(this);var g=0.95,f=c(window).width(),j=c(window).height(),i=new Image();if(!l.find("img").size()){return}l.filter(".bx-popup-wrapper").addClass("bx-popup-image-wrapper");i.src=e;if("undefined"!=typeof(d)){bx_loading(d,true)}c(i).on("load",function(){if("undefined"!=typeof(d)){bx_loading(d,false)}l.find("img").attr("src",e);if("undefined"!=typeof(window.matchMedia)&&window.matchMedia("(max-width:720px)").matches){g=1}if(i.width<f*g&&i.height<j*g){l.find("img").css({width:"auto",height:"auto"})}else{if((f*g-i.width)<(j*g-i.height)){l.find("img").css({width:""+(i.width>f*g?parseInt(f*g):i.width)+"px",height:"auto"}).addClass("bx-constrain-width")}else{l.find("img").css({width:"auto",height:""+(i.height>j*g?parseInt(j*g):i.height)+"px"}).addClass("bx-constrain-height")}}l.dolPopup();var h=function(k){k.stopPropagation();l.dolPopupHide()};l.find("img").on({click:h,touchend:h})})})};c.fn.dolPopupConfirm=function(f){var d=c("#bx-popup-confirm");if(f.message){d.find(".popup_confirm_text").html(f.message)}d.find(".popup_confirm_yes").bind("click",function(){if(f.onClickYes&&typeof(f.onClickYes)=="function"){f.onClickYes(d)}d.dolPopupHide()});d.find(".popup_confirm_no").bind("click",function(){if(f.onClickNo&&typeof(f.onClickNo)=="function"){f.onClickNo(d)}d.dolPopupHide()});var e=f.onHide;f.onHide=function(g){if(typeof(e)=="function"){e(d)}d.find(".bx-btn").unbind("click")};d.dolPopup(f)};c.fn.dolPopupPrompt=function(e){var f=c("#bx-popup-prompt");f.setValue=function(g){return f.find('[name="bx-popup-prompt-value"]').val(g)};f.getValue=function(){return f.find('[name="bx-popup-prompt-value"]').val()};if(e.message){f.find(".popup_prompt_text").html(e.message)}f.find(".popup_prompt_ok").bind("click",function(){if(e.onClickOk&&typeof(e.onClickOk)=="function"){e.onClickOk(f)}f.dolPopupHide()});f.find(".popup_prompt_cancel").bind("click",function(){if(e.onClickCancel&&typeof(e.onClickCancel)=="function"){e.onClickCancel(f)}f.dolPopupHide()});var d=e.onHide;e.onHide=function(g){if(typeof(d)=="function"){d(f)}f.setValue("");f.find(".bx-btn").unbind("click")};f.dolPopup(e)};c.fn._dolPopupSetPosition=function(d){var e=c.extend({},c.fn.dolPopupDefaultOptions,d);if(undefined!=e.pointer&&false!=e.pointer){e.pointer=c.extend({},c.fn.dolPopupDefaultPointerOptions,c(document).data("bx-popup-options")?c(document).data("bx-popup-options"):{},e.pointer)}return this.each(function(){var g=c(this);if(e.pointer!=false){var j=3;var h="string"==e.pointer.el?c(e.pointer.el):e.pointer.el;if(!h){h=c("body")}var i=(""+e.pointer.offset).split(" ",2);var f=(""+e.pointer.offset_pointer).split(" ",2);if(undefined==i[0]||undefined==i[1]){i=[0,0]}if(undefined==f[0]||undefined==f[1]){f=[0,0]}g.position({of:h,my:e.pointer.align+"+"+parseInt(i[0])+" top+"+j+"+"+parseInt(i[1]-0),at:e.pointer.align+" bottom",collision:"flip none"});g.find(".bx-popup-box-pointer").css("display","block").position({of:h,my:"center+"+(parseInt(f[0])+parseInt(i[0]))+" top+"+j+"+"+(parseInt(f[1])+parseInt(i[1])+0),at:"center bottom"});c(window).on("resize.popupPointer",function(){g.position({of:h,my:e.pointer.align+"+"+parseInt(i[0])+" top+"+j+"+"+parseInt(i[1]),at:e.pointer.align+" bottom",collision:"flip none"})})}else{if(e.position=="fixed"||e.position=="absolute"){g.css({position:e.position,left:e.left,top:e.top})}else{if(e.position=="centered"){g.position({of:window,my:"center center+"+(g.outerHeight()>c(window).height()?parseInt((g.outerHeight()-c(window).height())/2):"0"),at:"center center",collision:"none none"});c(window).on("resize.popupWindow",function(){g.position({of:window,my:"center center+"+(g.outerHeight()>c(window).height()?parseInt((g.outerHeight()-c(window).height())/2):"0"),at:"center center",collision:"none none"})})}else{if(typeof e.position=="object"){g.position({of:e.position,my:"center top",at:"center bottom",collision:"flip flip"})}}}}})};function a(){if(c(document.body).height()<=c(window).height()){return 0}var g=document.createElement("div"),e=document.createElement("div"),d,f;g.style.visibility="hidden";g.style.width="100px";document.body.appendChild(g);d=g.offsetWidth;g.style.overflow="scroll";e.style.width="100%";g.appendChild(e);f=e.offsetWidth;g.parentNode.removeChild(g);return d-f}function b(f){var g=c(document.body),d=c("html, body"),e=parseInt(g.css("padding-right"))+((f?1:-1)*a());g.css("padding-right",e+"px");f?d.addClass("bx-popup-lock"):d.removeClass("bx-popup-lock")}})(jQuery);
