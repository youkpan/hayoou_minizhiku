(function(h){var j="emojiPicker",e={width:"200",height:"350",position:"bottom",fadeTime:100,iconColor:"black",iconBackgroundColor:"#eee",container:"body",button:true};var f=200,d=600,i=100,b=350,g=50;function m(p,o){this.element=p;this.$el=h(p);this.settings=h.extend({},e,o);this.$container=h(this.settings.container);this.settings.width=parseInt(this.settings.width);this.settings.height=parseInt(this.settings.height);if(this.settings.width>=d){this.settings.width=d}else{if(this.settings.width<f){this.settings.width=f}}if(this.settings.height>=b){this.settings.height=b}else{if(this.settings.height<i){this.settings.height=i}}if(!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)){this.init()}}h.extend(m.prototype,{init:function(){this.active=false;this.addPickerIcon();this.createPicker();this.listen()},addPickerIcon:function(){var o=this.$el.outerHeight();var q=o>g?g:o;var p=this.$el.width();this.$el.width(p);this.$wrapper=this.$el.wrap("<div class='emojiPickerIconWrap'></div>").parent();if(this.settings.button){this.$icon=h('<div class="emojiPickerIcon"></div>').height(q).width(q).addClass(this.settings.iconColor).css("backgroundColor",this.settings.iconBackgroundColor);this.$wrapper.append(this.$icon)}},createPicker:function(){this.$picker=h(l()).appendTo(this.$container).width(this.settings.width).height(this.settings.height).css("z-index",10000);this.$picker.find("section").height(parseInt(this.settings.height)-40);if(this.settings.width<240){this.$picker.find(".emoji").css({width:"1em",height:"1em"})}},listen:function(){this.$wrapper.find(".emojiPickerIcon").click(h.proxy(this.iconClicked,this));this.$picker.find("section div").click(h.proxy(this.emojiClicked,this));this.$picker.find("nav .tab").click(h.proxy(this.emojiCategoryClicked,this));this.$picker.click(h.proxy(this.pickerClicked,this));h(document.body).click(h.proxy(this.clickOutside,this))},updatePosition:function(){var p,o;if(this.settings.container==="body"){p=this.$el.offset().top+this.$el.height();o=this.$el.offset().left}else{p=this.$el.position().top+this.$el.height();o=this.$el.position().left}this.$picker.css({top:p+15,left:o+this.$el.outerWidth()-this.settings.width});return this},hide:function(){this.$picker.hide(this.settings.fadeTime,"linear",function(){this.active=false}.bind(this))},show:function(){this.$el.focus();this.updatePosition();this.$picker.show(this.settings.fadeTime,"linear",function(){this.active=true}.bind(this))},iconClicked:function(o){if(this.$picker.is(":hidden")){this.show()}else{this.hide()}},emojiClicked:function(q){var o=h(q.target).attr("class").split("emoji-")[1];var p=c(n(o).unicode);a(this.element,p)},emojiCategoryClicked:function(p){var o="";this.$picker.find("nav .tab").removeClass("active");if(h(p.target).parent().hasClass("tab")){o=h(p.target).parent().attr("data-tab");h(p.target).parent(".tab").addClass("active")}else{o=h(p.target).attr("data-tab");h(p.target).addClass("active")}this.$picker.find("section").addClass("hidden");this.$picker.find("section."+o).removeClass("hidden")},pickerClicked:function(o){o.stopPropagation()},clickOutside:function(o){if(this.active){this.hide()}}});h.fn[j]=function(o){if(typeof o==="string"){this.each(function(){var p=h.data(this,j);switch(o){case"toggle":p.iconClicked();break}});return this}this.each(function(){if(!h.data(this,j)){h.data(this,j,new m(this,o))}});return this};function l(){var r=[];var q=[{name:"emotion",symbol:"grinning"},{name:"animal",symbol:"whale"},{name:"food",symbol:"hamburger"},{name:"folderol",symbol:"sunny"},{name:"thing",symbol:"kiss"},{name:"travel",symbol:"rocket"}];var o={people:"emotion",symbol:"thing","undefined":"thing"};var p={};h.each(h.fn.emojiPicker.emojis,function(v,x){var w=o[x.category]||x.category;p[w]=p[w]||[];p[w].push(x)});r.push('<div class="emojiPicker">');r.push("<nav>");for(var t in q){r.push('<div class="tab'+(t==0?" active":"")+'" data-tab="'+q[t].name+'"><div class="emoji emoji-'+q[t].symbol+'"></div></div>')}r.push("</nav>");for(var t in q){r.push('<section class="'+q[t].name+(t==0?"":" hidden")+'">');for(var s in p[q[t].name]){var u=p[q[t].name][s];r.push('<div class="emoji emoji-'+u.shortcode+'"></div>')}r.push("</section>")}r.push("</div>");return r.join("\n")}function n(p){var o=h.fn.emojiPicker.emojis;for(var q=0;q<o.length;q++){if(o[q].shortcode==p){return o[q]}}}function a(o,r){if(document.selection){o.focus();var s=document.selection.createRange();s.text=r;o.focus()}else{if(o.selectionStart||o.selectionStart=="0"){var q=o.selectionStart;var p=o.selectionEnd;var t=o.scrollTop;o.value=o.value.substring(0,q)+r+o.value.substring(p,o.value.length);o.focus();o.selectionStart=q+r.length;o.selectionEnd=q+r.length;o.scrollTop=t}else{o.focus();o.value+=r}}}function c(p){var o=p.split("-").map(function(r,q){return parseInt(r,16)});return String.fromCodePoint.apply(null,o)}if(!String.fromCodePoint){String.fromCodePoint=function k(){var r=[],o,s,p,q;for(q=0;q<arguments.length;++q){o=arguments[q];s=o-65536;p=o>65535?[55296+(s>>10),56320+(s&1023)]:[o];r.push(String.fromCharCode.apply(null,p))}return r.join("")}}})(jQuery);
