function BxUserStatus(){this.HomeUrl;this.bIsProfilePage;this.sCurrentStatusElementClass="sys-online-offline-changer";this.sCurrentStatusElementSelector="."+this.sCurrentStatusElementClass;this.userStatusInit=function(b,a){this.HomeUrl=b;this.bIsProfilePage=(a)?true:false};this.setUserStatus=function(c,d,b){var a=this;var c=encodeURIComponent(c);var e=Math.random();$.post(this.HomeUrl+"list_pop.php?action=change_status&_r="+e,{status:c},function(f){if(a.bIsProfilePage||("undefined"!=typeof(b)&&b)){document.location.reload()}else{$(a.sCurrentStatusElementSelector).attr({alt:c}).removeClass().addClass(a.sCurrentStatusElementClass+" sys-icon "+f);a.closeSubMenu(d)}})};this.sendStatusMessage=function(c,b){var a=this;if(!c){if(window.event){c=window.event}else{return false}}var d=c.keyCode?c.keyCode:c.charCode;if(d==13){if(c.preventDefault){c.preventDefault()}else{c.returnValue=false}a.PerformSendingStatusMess(b);return false}return true};this.PerformSendingStatusMess=function(b){var a=this;var c=Math.random();$.post(this.HomeUrl+"list_pop.php?action=change_status_message&_r="+c,{status_message:b.value},function(d){$("#StatusMessage > .sys_sm_text").html(b.value).parent().show();$("#inloadedStatusMess").html("");if(a.bIsProfilePage){document.location.reload()}else{a.closeSubMenu($(b).parents("ul:first"))}})};this.closeSubMenu=function(a){if(typeof membermenu!="undefined"){membermenu.close_popup($(a).attr("id"))}}};
