function BxSctrMain(a){this._sCustomBlock="site_customize";this._sPublishBlock="site_customize_popup";this.sBaseUrl=a.sBaseUrl;this.sReset=a.sReset==undefined?"Reset?":a.sReset;this.sErrThemeName=a.sErrThemeName==undefined?"Please fill name of theme":a.sErrThemeName;this.sErrChooseTheme=a.sErrChooseTheme==undefined?"Choose any theme":a.sErrChooseTheme;this.sDeleteTheme=a.sDeleteTheme==undefined?"Delete theme?":a.sDeleteTheme;this.sResetPage=a.sResetPage==undefined?"Reset page?":a.sResetPage}BxSctrMain.prototype.showBlock=function(){var c=this;var b=new Date();var a=$("#"+this._sCustomBlock).is(":visible")?0:1;$.get(this.sBaseUrl+"open/"+a,{_t:b.getTime()},function(){$("#"+c._sCustomBlock).bx_anim("toggle","fade","slow",function(){})},"json")};BxSctrMain.prototype.updateBlock=function(c,b){var a=$("#"+c);if($(a).length>0){getHtmlData(a,b,null)}};BxSctrMain.prototype.saveChanges=function(a){var c=$("#"+this._sCustomBlock+" form");if($(c).length>0){var b={success:function(d){a(d)}};$(c).ajaxSubmit(b)}};BxSctrMain.prototype.reloadCustomizeBlock=function(a,c){var e=$("#"+this._sCustomBlock+" form");if($(e).length<=0){getHtmlData($("#"+this._sCustomBlock),a,null);return}var b=this;var d=function(){$(e).ajaxSubmit({success:function(f){getHtmlData($("#"+b._sCustomBlock),a,null)}})};if(!c){d();return}$(document).dolPopupConfirm({message:this.sReset,onClickYes:function(){var f=$(e).attr("action")+"/1";$(e).attr("action",f);d()}})};BxSctrMain.prototype.resetCustom=function(c,b,a){var d=this;$(document).dolPopupConfirm({message:this.sReset,onClickYes:function(){var f=$("#"+d._sCustomBlock+" form");if($(f).length>0){var e=$(f).attr("action")+"/1";$(f).attr("action",e);$(f).find("[name='action']").val(a);$(f).ajaxSubmit({success:function(g){window.location.href=window.location.href}})}}})};BxSctrMain.prototype.reloadCustom=function(c,b,a){$("#"+this._sCustomBlock+" form [name='action']").val(a);this.saveChanges(function(d){window.location.href=window.location.href})};BxSctrMain.prototype.showPublish=function(a){var c=$("#"+this._sCustomBlock+" form");if(!$(c).length){return}var b=this;$(c).ajaxSubmit({success:function(d){if(!$("#"+b._sPublishBlock).length){$('<div id="'+b._sPublishBlock+'" style="width:490px; display:none;"></div>').prependTo("body")}$("#"+b._sPublishBlock).load(a,function(){$(this).dolPopup()})}})};BxSctrMain.prototype.savePublish=function(){var c=$("#"+this._sPublishBlock+" form");if(!$(c).length){return}if(c.find(".form_input_text").val()){var b=this;var a={success:function(d){var e=$("#"+b._sPublishBlock);if($(e).length>0){$(e).html(d)}}};$(c).ajaxSubmit(a)}else{alert(this.sErrThemeName)}};BxSctrMain.prototype.selectTheme=function(a,b){var c=$(a).find("input[type=radio]");if(c.length>0){c.attr("checked",1)}};BxSctrMain.prototype.previewTheme=function(){var a=this.getSelectTheme();if(a!=-1){var c=$("#"+this._sCustomBlock+" form");var b={success:function(d){window.location.href=window.location.href}};$(c).ajaxSubmit(b)}else{alert(this.sErrChooseTheme)}};BxSctrMain.prototype.saveTheme=function(){var a=this.getSelectTheme();if(a!=-1){getHtmlData($("#"+this._sCustomBlock),$("#save_url").val()+a,function(){window.location.href=window.location.href})}else{alert(this.sErrChooseTheme)}};BxSctrMain.prototype.deleteTheme=function(b){var a=this.getSelectTheme();if(a==-1){alert(this.sErrChooseTheme);return}var c=this;$(document).dolPopupConfirm({message:this.sDeleteTheme,onClickYes:function(){getHtmlData($("#"+c._sCustomBlock),b+a)}})};BxSctrMain.prototype.resetAll=function(a){var b=this;$(document).dolPopupConfirm({message:this.sResetPage,onClickYes:function(){getHtmlData($("#"+b._sCustomBlock),a,function(){window.location.href=window.location.href})}})};BxSctrMain.prototype.getSelectTheme=function(){var a=$("#"+this._sCustomBlock+" form input[type=radio]:checked");if($(a).length>0){return $(a).val()}return -1};
